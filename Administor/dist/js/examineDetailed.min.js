!function(){Vue.http.interceptors.push(function(t,e){t.credentials=!0,e()});new Vue({el:"body",data:{domain:"http://shaozi.beansonbar.cn",parentMsg:{},tutorMsg:{},status:{isFeeInfo:!1,isLoading:!1,isParent:!1,isTeacher:!1,isEnlargeImg:!1,enlargeImg:"",isExamine:!1,isOnFee:!1},form:{select:1,id:0,user:"teacher",tea_id:"",par_id:""},fee:Number,priFee:""},ready:function(){this.setOption();var t=this.form.select;1==t?this.form.user="teacher":2==t?this.form.user="parent":this.form.user="both",this.renderData(),this.status.isLoading=!0},methods:{setOption:function(){var t=location.search;if(t.indexOf("?")!=-1){t=t.substr(1,t.length).split("&");for(var e,s=0,i=t.length;s<i;s++)switch(e=t[s].split("="),e[0]){case"select":this.form.select=parseInt(e[1]);break;case"teaId":this.form.tea_id=parseInt(e[1]);break;case"parId":this.form.par_id=parseInt(e[1]);break;case"listId":this.form.id=parseInt(e[1]);break;case"price":this.priFee=parseFloat(e[1])}}},renderData:function(){var t=this.form,e=t.select,s=t.user,i=t.id,n=t.tea_id,o=t.par_id;3!==e?(this.getData(i,s),this.status.isExamine=!0):(this.getData(o,"parent"),this.getData(n,"teacher"),""!==this.priFee?this.status.isOnFee=!0:this.status.isExamine=!0)},getData:function(t,e){this.$http.post(this.domain+"/getInfo",{id:t,format:!0,user:e},{crossOrigin:!0,headers:{"Content-Type":"application/json"}}).then(function(t){if(console.log(t.json()),0==t.json().success)console.log(t.json().error);else if("teacher"==e){var s=t.json();""!=s.certificate_photo&&null!=s.certificate_photo&&(s.certificate_photo=this.domain+s.certificate_photo);var i=s.teach_show_photo,n=i.length;if(n>0)for(var o=0;o<n;o++)i[o]=this.domain+i[o];this.status.isTeacher=!0,this.$set("tutorMsg",s)}else{this.status.isParent=!0;var s=t.json();s.class_field=this.grade_level(s.class_field),this.$set("parentMsg",s)}})},grade_level:function(t){switch(t){case 0:return"";case 1:return"较为靠后";case 2:return"中等偏下";case 3:return"中等水平";case 4:return"中上水平";case 5:return"名列前茅"}},onReturn:function(){window.location.href="./examine.html?select="+this.form.select},notExamine:function(){var t=this.form.select;3!==t?this.onExamine(0):this.onOrderEx(0)},onUser:function(){window.location.href="./userAdministor.html"},onDeal:function(){window.location.href="./deal.html"},onOther:function(){window.location.href="./other.html"},YesExamine:function(){var t=this.form.select;3!==t?this.onExamine(1):this.status.isFeeInfo=!0},onExamine:function(t){this.$http.post(this.domain+"/setPass",{type:t,user:this.form.user,id:this.form.id},{crossOrigin:!0,headers:{"Content-Type":"application/json"}}).then(function(t){console.log(t.json()),0==t.json().success?console.log(t.json().error):this.onReturn()})},onOrderEx:function(t){var e,s=this.form.id;e=1==t?{oa_id:s,price:this.fee,willing:1}:{oa_id:s,willing:0},this.$http.post(this.domain+"/makePriceAndApprove",e,{crossOrigin:!0,headers:{"Content-Type":"application/json"}}).then(function(t){console.log(t.json()),0==t.json().success?console.log(t.json().error):this.onReturn()})},showImg:function(t){this.status.enlargeImg=this.tutorMsg.teach_show_photo[t],this.status.isEnlargeImg=!0},closeImg:function(){this.status.isEnlargeImg=!1},onSubmit:function(){this.onOrderEx(1)},onClose:function(){this.status.isFeeInfo=!1},onFeeInfo:function(){this.status.isFeeInfo=!0,this.fee=this.priFee}}})}();