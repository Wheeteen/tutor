!function(){Vue.http.interceptors.push(function(s,t){s.credentials=!0,t()});new Vue({el:"body",data:{timer:null,domain:"http://shaozi.beansonbar.cn",status:{isSelecting:!0,isLoading:!1,isUploadImg:!1,selected:"",isSend:"",isGreen:!0,isFeeInfo:!1,isFeeInfoTrue:!1,isList:!0,isNoList:!1,isEnlargeImg:!1,enlargeImg:"",noDeal:!0,haveDeal:!1},mainData:[],detailedList:[],jsonData:[],para:{size:15,start:0}},ready:function(){this.render(),this.status.isLoading=!0},methods:{down:function(){this.form.size=5,this.para.start++,0!==this.jsonData.length&&this.render()},render:function(){var s=this;this.status.isSelecting=!0,this.$http.post(this.domain+"/getDoneList",this.para,{crossOrigin:!0,headers:{"Content-Type":"application/json"}}).then(function(t){if(console.log(t.json()),0==t.json().success)console.log(t.json().error);else{this.jsonData=t.json();var i=t.json(),e=i.length;if(0!==e){for(var n=0;n<e;n++)i[n].screenshot_path=this.domain+i[n].screenshot_path,"已成交"==i[n].result?i[n].isDeal=!0:i[n].isDeal=!1;var a=s.mainData.concat(i);this.$set("mainData",a),this.status.isSelecting=!1}else 0==this.mainData.length&&(this.status.isList=!1,this.status.isNoList=!0)}})},onUser:function(){window.location.href="./userAdministor.html"},onOther:function(){window.location.href="./other.html"},onDeal:function(s){this.status.selected=s,this.status.isUploadImg=!0,this.detailedList=this.mainData[s];var t=this.mainData[s].result;"未处理"==t?(this.status.noDeal=!0,this.status.haveDeal=!1):(this.status.noDeal=!1,this.status.haveDeal=!0,(t="已成交")?(this.status.isSend="已通过审核",this.status.isGreen=!0):(this.status.isSend="没有通过审核",this.status.isGreen=!1))},onClose:function(){this.status.isUploadImg=!1},onApprove:function(s){this.onOrder(s,1)},onRefuse:function(s){this.onOrder(s,0)},onOrder:function(s,t){var i,e=this.mainData[s];i={oa_id:e.oa_id,willing:t},this.$http.post(this.domain+"/makePriceAndApprove",i,{crossOrigin:!0,headers:{"Content-Type":"application/json"}}).then(function(s){if(console.log(s.json()),0==s.json().success)console.log(s.json().error);else{var i=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){1==t?(e.isDeal=!0,e.result="已成交"):(e.isDeal=!1,e.result="不通过"),i.status.isUploadImg=!1},1e3)}})},showImg:function(){this.status.enlargeImg=this.mainData[this.status.selected].screenshot_path,this.status.isEnlargeImg=!0},closeImg:function(){this.status.isEnlargeImg=!1}}})}();